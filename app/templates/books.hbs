{{page-title "Books"}}

<h1>Books</h1>

<DataTable
  @content={{@model}}
  this.sort={{this.sort}}
  @page={{this.page}}
  @size={{this.size}}
  @onClickRow={{this.navigate}}
  as |t|>
  <t.content as |c|>
    <c.header>
      <ThSortable @field='title' @currentSorting={{this.sort}} @label='Title' />
      <ThSortable @field='authors' @currentSorting={{this.sort}} @label='Authors' />
      <ThSortable @field='genre' @currentSorting={{this.sort}} @label='Genre' />
      <ThSortable @field='pages' @currentSorting={{this.sort}} @label='Pages' />
      <ThSortable @field='language' @currentSorting={{this.sort}} @label='Language' />
      <ThSortable @field='publisher' @currentSorting={{this.sort}} @label='Publisher' />
      <ThSortable @field='date' @currentSorting={{this.sort}} @label='Published' />
      <th>ISBN</th>
      <ThSortable @field='averagerating' @currentSorting={{this.sort}} @label='Average Rating' />
    </c.header>
    <c.body as |row|>
      <td>{{row.title}}</td>
      <td>
        {{#each row.authors as |author index|}}
          {{author.name}}{{if (is-not-last index row.authors) ", "}}
        {{/each}}
      </td>
      <td>{{row.genre}}</td>
      <td>{{row.pages}}</td>
      <td>{{row.language}}</td>
      <td>{{row.publisher}}</td>
      <td>{{row.date}}</td>
      <td>{{row.isbn}}</td>
      <td>{{row.averagerating}}</td>
    </c.body>
  </t.content>
</DataTable>
